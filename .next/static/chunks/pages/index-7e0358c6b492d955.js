(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[332],{1681:(e,t,s)=>{"use strict";s.r(t);s.d(t,{"default":()=>o});var n=s(7876);var i=s(4232);var r=s(9099);var a=s(5105);if(true){window.handleTelegramAuth=e=>{sessionStorage.setItem("telegramSession",JSON.stringify(e));window.location.href="/scheduler"}}function l(){const e=(0,r.useRouter)();const t="Brad";const s=(0,i.useRef)(null);const[a,l]=(0,i.useState)("");const[o,c]=(0,i.useState)("");const[d,u]=(0,i.useState)(true);const[h,p]=(0,i.useState)(true);const[g,x]=(0,i.useState)(true);const[y,f]=(0,i.useState)(null);const[m,k]=(0,i.useState)(false);(0,i.useEffect)(()=>{const t=e.query.linkedin;if(t){try{const s=JSON.parse(decodeURIComponent(t));sessionStorage.setItem("linkedinSession",JSON.stringify(s));e.push("/scheduler")}catch(e){console.error("Failed to parse LinkedIn session:",e)}}},[e.query.linkedin]);(0,i.useEffect)(()=>{if(g&&s.current&&!m){s.current.innerHTML="";const e=document.createElement("script");e.async=true;e.src="https://telegram.org/js/telegram-widget.js?7";e.setAttribute("data-telegram-login","distromedia_bot");e.setAttribute("data-size","large");e.setAttribute("data-userpic","true");e.setAttribute("data-request-access","write");e.setAttribute("data-onauth","handleTelegramAuth(user)");s.current.appendChild(e);k(true)}},[g,m]);(0,i.useEffect)(()=>{if(!g){k(false);if(s.current){s.current.innerHTML=""}}},[g]);(0,i.useEffect)(()=>{return()=>{if(s.current){s.current.innerHTML=""}}},[]);const j=async()=>{if(!a.trim()){alert("❌ Please enter your Bluesky handle or email");return}if(!o.trim()){alert("❌ Please enter your app password");return}let t=a.trim();t=t.replace(/[\u200B-\u200D\uFEFF]/g,"");t=t.replace(/^@/,"");t=t.replace(/[.\s]+$/,"");console.log("Original identifier:",JSON.stringify(a));console.log("Cleaned identifier:",JSON.stringify(t));const s=await fetch("/api/bluesky/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:t,appPassword:o.trim()})});const n=await s.json();if(n.success){alert("✅ Logged into Bluesky");sessionStorage.setItem("blueskySession",JSON.stringify(n.session));sessionStorage.setItem("blueskyHandle",t);if(n.avatarUrl)sessionStorage.setItem("blueskyAvatarUrl",n.avatarUrl);e.push("/scheduler")}else{const e=n.error||"Login failed";alert(`❌ Bluesky login failed: ${e}`);console.error("Bluesky login error details:",n.details)}};const w=()=>{window.location.href="/api/linkedin/auth"};return(0,n.jsx)("main",{className:"container",children:(0,n.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,n.jsxs)("h1",{children:["Welcome back, ",t]}),(0,n.jsx)("p",{style:{fontSize:"1.5em",marginTop:"20px"},children:"DistroMedia content scheduler"}),(0,n.jsxs)("div",{style:{margin:"30px 0 40px 0",display:"flex",justifyContent:"center",gap:"32px"},children:[(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked),style:{width:18,height:18}}),"Bluesky"]}),(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p(e.target.checked),style:{width:18,height:18}}),"LinkedIn"]}),(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:g,onChange:e=>x(e.target.checked),style:{width:18,height:18}}),"Telegram"]})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"32px"},children:[d&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("img",{src:"/images/Bluesky_Logo.png",alt:"BlueSky Logo",style:{display:"block",margin:"0 auto 20px auto",width:"50px"}}),(0,n.jsx)("h3",{children:"Login with BlueSky"}),(0,n.jsx)("input",{placeholder:"Bluesky handle (e.g. @distromedia.bsky.social)",value:a,onChange:e=>l(e.target.value),style:{display:"block",marginBottom:"10px"}}),(0,n.jsx)("input",{type:"password",placeholder:"App Password",value:o,onChange:e=>c(e.target.value),style:{display:"block",marginBottom:"10px"}}),(0,n.jsx)("div",{style:{fontSize:"0.95em",color:"#aaa",marginBottom:"10px"},children:(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Note:"})," You must use a ",(0,n.jsx)("a",{href:"https://bsky.app/settings/app-passwords",target:"_blank",rel:"noopener noreferrer",style:{color:"#3f51b5",textDecoration:"underline"},children:"Bluesky App Password"})," (not your main password)."]})}),(0,n.jsx)("button",{onClick:j,children:"Log in to BlueSky"})]}),h&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("div",{style:{color:"#0A66C2",fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:"LinkedIn"}),(0,n.jsx)("h3",{children:"Login with LinkedIn"}),(0,n.jsx)("button",{onClick:w,children:"Log in with LinkedIn"})]}),g&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"0 auto 20px auto"},children:(0,n.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 240 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"120",cy:"120",r:"120",fill:"#229ED9"}),(0,n.jsx)("path",{d:"M180.5 72.5L157.5 180.5C155.5 188.5 150.5 190.5 143.5 186.5L110.5 161.5L94.5 176.5C92.5 178.5 91 180 87.5 180L90.5 145.5L157.5 84.5C160.5 81.5 157.5 80 153.5 83.5L77.5 140.5L44.5 130.5C37.5 128.5 37.5 123.5 46.5 120.5L172.5 74.5C178.5 72.5 182.5 75.5 180.5 72.5Z",fill:"white"})]})}),(0,n.jsx)("h3",{children:"Login with Telegram"}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"10px 0"},children:(0,n.jsx)("div",{ref:s})})]})]})]})})}const o=l},2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1681)}]);if(false){}},5105:(e,t,s)=>{s(7195)},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936));var s=e.O();_N_E=s}]);