(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[332],{1681:(e,t,s)=>{"use strict";s.r(t);s.d(t,{"default":()=>o});var n=s(7876);var i=s(4232);var a=s(9099);var r=s(5105);if(true){window.handleTelegramAuth=e=>{sessionStorage.setItem("telegramSession",JSON.stringify(e));window.location.href="/scheduler"}}function l(){const e=(0,a.useRouter)();const t="Brad";const[s,r]=(0,i.useState)("");const[l,o]=(0,i.useState)("");const[c,d]=(0,i.useState)(true);const[p,g]=(0,i.useState)(true);const[h,u]=(0,i.useState)(true);const[x,y]=(0,i.useState)(null);(0,i.useEffect)(()=>{const t=e.query.linkedin;if(t){try{const s=JSON.parse(decodeURIComponent(t));sessionStorage.setItem("linkedinSession",JSON.stringify(s));e.push("/scheduler")}catch(e){console.error("Failed to parse LinkedIn session:",e)}}},[e.query.linkedin]);const m=async()=>{if(!s.trim()){alert("❌ Please enter your Bluesky handle or email");return}if(!l.trim()){alert("❌ Please enter your app password");return}let t=s.trim();t=t.replace(/[\u200B-\u200D\uFEFF]/g,"");t=t.replace(/^@/,"");t=t.replace(/[.\s]+$/,"");console.log("Original identifier:",JSON.stringify(s));console.log("Cleaned identifier:",JSON.stringify(t));const n=await fetch("/api/bluesky/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:t,appPassword:l.trim()})});const i=await n.json();if(i.success){alert("✅ Logged into Bluesky");sessionStorage.setItem("blueskySession",JSON.stringify(i.session));sessionStorage.setItem("blueskyHandle",t);if(i.avatarUrl)sessionStorage.setItem("blueskyAvatarUrl",i.avatarUrl);e.push("/scheduler")}else{const e=i.error||"Login failed";alert(`❌ Bluesky login failed: ${e}`);console.error("Bluesky login error details:",i.details)}};const f=()=>{window.location.href="/api/linkedin/auth"};return(0,n.jsx)("main",{className:"container",children:(0,n.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,n.jsxs)("h1",{children:["Welcome back, ",t]}),(0,n.jsx)("p",{style:{fontSize:"1.5em",marginTop:"20px"},children:"DistroMedia content scheduler"}),(0,n.jsxs)("div",{style:{margin:"30px 0 40px 0",display:"flex",justifyContent:"center",gap:"32px"},children:[(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),style:{width:18,height:18}}),"Bluesky"]}),(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),style:{width:18,height:18}}),"LinkedIn"]}),(0,n.jsxs)("label",{style:{fontWeight:600,fontSize:"1.1em",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:e=>u(e.target.checked),style:{width:18,height:18}}),"Telegram"]})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"32px"},children:[c&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("img",{src:"/images/Bluesky_Logo.png",alt:"BlueSky Logo",style:{display:"block",margin:"0 auto 20px auto",width:"50px"}}),(0,n.jsx)("h3",{children:"Login with BlueSky"}),(0,n.jsx)("input",{placeholder:"Bluesky handle (e.g. @distromedia.bsky.social)",value:s,onChange:e=>r(e.target.value),style:{display:"block",marginBottom:"10px"}}),(0,n.jsx)("input",{type:"password",placeholder:"App Password",value:l,onChange:e=>o(e.target.value),style:{display:"block",marginBottom:"10px"}}),(0,n.jsx)("div",{style:{fontSize:"0.95em",color:"#aaa",marginBottom:"10px"},children:(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Note:"})," You must use a ",(0,n.jsx)("a",{href:"https://bsky.app/settings/app-passwords",target:"_blank",rel:"noopener noreferrer",style:{color:"#3f51b5",textDecoration:"underline"},children:"Bluesky App Password"})," (not your main password)."]})}),(0,n.jsx)("button",{onClick:m,children:"Log in to BlueSky"})]}),p&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("div",{style:{color:"#0A66C2",fontSize:"24px",fontWeight:"bold",marginBottom:"20px"},children:"LinkedIn"}),(0,n.jsx)("h3",{children:"Login with LinkedIn"}),(0,n.jsx)("button",{onClick:f,children:"Log in with LinkedIn"})]}),h&&(0,n.jsxs)("section",{className:"card",style:{minWidth:300,textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.15)",borderRadius:"16px"},children:[(0,n.jsx)("img",{src:"/images/telegram-profile.png",alt:"Telegram Logo",style:{display:"block",margin:"0 auto 20px auto",width:"50px"}}),(0,n.jsx)("h3",{children:"Login with Telegram"}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"10px 0"},children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:`
                      <script async src="https://telegram.org/js/telegram-widget.js?7"
                        data-telegram-login="distromedia_bot"
                        data-size="large"
                        data-userpic="true"
                        data-request-access="write"
                        data-onauth="handleTelegramAuth(user)"
                      ></script>
                    `}})})]})]})]})})}const o=l},2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1681)}]);if(false){}},5105:(e,t,s)=>{s(7195)},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936));var s=e.O();_N_E=s}]);