(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[574],{5165:(e,t,s)=>{"use strict";s.r(t);s.d(t,{"default":()=>r});var n=s(7876);var o=s(4232);function i(){const[e,t]=(0,o.useState)("");const[s,i]=(0,o.useState)("");const[r,a]=(0,o.useState)("");const[l,d]=(0,o.useState)(null);const[c,g]=(0,o.useState)(null);const[f,m]=(0,o.useState)("");const[h,u]=(0,o.useState)(null);const[p,x]=(0,o.useState)(false);const[y,b]=(0,o.useState)(null);const[j,k]=(0,o.useState)("");const[S,v]=(0,o.useState)(null);const[w,I]=(0,o.useState)("");const[T,C]=(0,o.useState)("");(0,o.useEffect)(()=>{const e=sessionStorage.getItem("linkedinSummary");const s=sessionStorage.getItem("blueskySummary");const n=sessionStorage.getItem("articleUrl");const o=sessionStorage.getItem("articleMetadata");const r=sessionStorage.getItem("blueskySession");const l=sessionStorage.getItem("blueskyHandle");const c=sessionStorage.getItem("linkedinSession");const f=sessionStorage.getItem("blueskyAvatarUrl");const h=sessionStorage.getItem("telegramSession");const p=sessionStorage.getItem("telegramMessage");if(e)t(e);if(s)i(s);if(n)a(n);if(o)d(JSON.parse(o));if(r)g(JSON.parse(r));if(l)m(l);if(c)u(JSON.parse(c));if(f)k(f);if(h)v(JSON.parse(h));if(p)I(p)},[]);(0,o.useEffect)(()=>{sessionStorage.setItem("linkedinSummary",e);sessionStorage.setItem("blueskySummary",s);sessionStorage.setItem("articleUrl",r);if(l)sessionStorage.setItem("articleMetadata",JSON.stringify(l))},[e,s,r,l]);const z=async()=>{if(!c){alert("Please log in to Bluesky first via the homepage.");return}if(!r||!l){alert("Please fetch an article and generate a summary before posting.");return}if(s.length>280){alert("❌ Summary is too long. Please edit it to be under 280 characters.");return}const e=s;console.log("Posting to Bluesky with:",{postText:e,articleUrl:r,articleMetadata:l});const t=await fetch("/api/bluesky/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,accessJwt:c.accessJwt,did:c.did,embed:l?{$type:"app.bsky.embed.external",external:{uri:r,title:l.title,description:l.description,thumb:l.image||undefined}}:undefined})});const n=await t.json();if(n.success){alert("✅ Posted to Bluesky!");i("")}else{alert("❌ Bluesky post failed: "+(n.error||"Unknown error"))}};const B=async()=>{if(!h){alert("Please log in to LinkedIn first via the homepage.");return}if(!r){alert("Please fetch an article and generate a summary before posting.");return}console.log("Posting to LinkedIn with:",{linkedinSummary:e,articleUrl:r,articleMetadata:l});try{const t=await fetch("/api/linkedin/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,url:r||"",accessToken:h.accessToken,userId:h.userId})});const s=await t.json();if(s.success){alert("✅ Posted to LinkedIn!")}else{alert("❌ LinkedIn post failed: "+(s.error||"Unknown error"))}}catch(e){console.error("LinkedIn post error:",e);alert("❌ Failed to post to LinkedIn")}};const P=async e=>{if(!S){alert("Please log in to Telegram first via the homepage.");return}if(!w){alert("Please enter a message to send.");return}if(!e){alert("Please enter a valid chat ID.");return}try{const t=await fetch("/api/telegram/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:e,text:w,link:r||""})});const s=await t.json();if(s.success){alert("✅ Sent to Telegram!")}else{alert("❌ Telegram post failed: "+(s.error||"Unknown error"))}}catch(e){console.error("Telegram post error:",e);alert("❌ Failed to post to Telegram")}};const N=e=>{b(e);x(true)};const _=()=>{x(false);if(y==="linkedin")B();if(y==="bluesky")z();if(y==="telegram")P(S.id);b(null)};const W=()=>{x(false);b(null)};const L=async()=>{let t=[];if(c&&s&&r&&l&&s.length<=280){try{await z();t.push("✅ Posted to Bluesky!")}catch(e){t.push("❌ Bluesky post failed")}}if(h&&e&&r){try{await B();t.push("✅ Posted to LinkedIn!")}catch(e){t.push("❌ LinkedIn post failed")}}if(S&&w){try{await P(S.id);t.push("✅ Sent to Telegram!")}catch(e){t.push("❌ Telegram post failed")}}if(t.length===0){alert("No platforms to post to. Please log in and fill out your content.")}else{alert(t.join("\n"))}};return(0,n.jsxs)("main",{className:"container",children:[(0,n.jsx)("h1",{style:{marginBottom:"1.2rem",marginTop:"0.5rem"},children:"\uD83D\uDE80 Post Your Content"}),(0,n.jsxs)("p",{style:{textAlign:"left",marginTop:"10px",marginBottom:"30px"},children:["Use your AI-generated content and post to your connected social accounts.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"Currently, you are signed in as:",(0,n.jsx)("br",{}),h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{href:`https://www.linkedin.com/search/results/all/?keywords=${encodeURIComponent(h.name)}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#0A66C2"},children:h.name})," on LinkedIn",(0,n.jsx)("br",{})]}),c&&f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{href:`https://bsky.app/profile/${f.replace(/^@/,"")}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#3f51b5"},children:f.startsWith("@")?f:`@${f}`})," on BlueSky"]})]}),h&&(0,n.jsxs)("section",{className:"card",style:{background:"#fff",color:"#222",maxWidth:600,margin:"0 auto 32px auto",boxShadow:"0 2px 12px #0002"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:8},children:[(0,n.jsx)("img",{src:h.profileImageUrl||"/images/linkedin-profile.png",alt:"LinkedIn Profile",style:{width:48,height:48,borderRadius:"50%",background:"#eee",objectFit:"cover"}}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,n.jsx)("span",{style:{fontWeight:700,fontSize:"1.1em"},children:h.name||"LinkedIn User"}),(0,n.jsx)("span",{style:{color:"#666",fontSize:"1.1em"},children:"•"}),(0,n.jsx)("span",{style:{color:"#666",fontSize:"0.95em"},children:"You"})]}),(0,n.jsx)("div",{style:{color:"#888",fontSize:"0.97em",marginTop:2},children:"Your job title"})]})]}),(0,n.jsx)("textarea",{rows:"3",value:e,onChange:e=>t(e.target.value),style:{width:"100%",border:"none",background:"transparent",fontSize:"1.1em",color:"#222",resize:"vertical",marginBottom:12,fontFamily:"inherit",outline:"none",fontWeight:400,minHeight:60,boxSizing:"border-box",padding:0}}),l&&(0,n.jsxs)("div",{style:{border:"1.5px solid #eee",borderRadius:12,display:"flex",alignItems:"flex-start",margin:"12px 0 8px 0",background:"#fafbfc",overflow:"hidden"},children:[l.image&&(0,n.jsx)("img",{src:l.image,alt:l.title,style:{width:120,height:80,objectFit:"cover",borderRadius:"12px 0 0 12px"}}),(0,n.jsxs)("div",{style:{padding:"10px 14px",flex:1},children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"1.05em",marginBottom:2},children:l.title}),(0,n.jsx)("div",{style:{color:"#666",fontSize:"0.97em",marginBottom:2},children:l.description}),(0,n.jsx)("div",{style:{color:"#888",fontSize:"0.93em",marginTop:2},children:r&&new URL(r).hostname})]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start",marginTop:10},children:e&&(0,n.jsxs)("button",{onClick:()=>N("linkedin"),style:{background:"#0A66C2",color:"#fff"},children:["Send to LinkedIn ",r?"with Article":""]})})]}),c&&(0,n.jsxs)("section",{className:"card",style:{background:"#181c22",color:"#f0f0f0",maxWidth:600,margin:"0 auto 32px auto",boxShadow:"0 2px 12px #0002"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:8},children:[(0,n.jsx)("img",{src:j||"/images/bluesky-profile.png",alt:"Bluesky Profile",style:{width:48,height:48,borderRadius:"50%",background:"#222",objectFit:"cover"}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"1.1em"},children:f||"Bluesky User"}),(0,n.jsxs)("div",{style:{color:"#aaa",fontSize:"0.95em"},children:["@",f.replace(/^@/,"")]})]})]}),(0,n.jsx)("textarea",{rows:"3",value:s,onChange:e=>i(e.target.value),style:{width:"100%",border:"none",background:"transparent",fontSize:"1.1em",color:"#f0f0f0",resize:"vertical",marginBottom:12,fontFamily:"inherit",outline:"none",fontWeight:400,minHeight:60,boxSizing:"border-box",padding:0}}),l&&(0,n.jsxs)("div",{style:{border:"1.5px solid #222",borderRadius:12,background:"#23272e",margin:"12px 0 8px 0",overflow:"hidden",display:"flex",alignItems:"flex-start"},children:[l.image&&(0,n.jsx)("img",{src:l.image,alt:l.title,style:{width:120,height:80,objectFit:"cover",borderRadius:"12px 0 0 12px"}}),(0,n.jsxs)("div",{style:{padding:"10px 14px",flex:1},children:[(0,n.jsx)("div",{style:{fontWeight:700,fontSize:"1.05em",marginBottom:2},children:l.title}),(0,n.jsx)("div",{style:{color:"#aaa",fontSize:"0.97em",marginBottom:2},children:l.description}),(0,n.jsx)("div",{style:{color:"#888",fontSize:"0.93em",marginTop:2},children:r&&new URL(r).hostname})]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start",marginTop:10},children:s&&(0,n.jsxs)("button",{onClick:()=>N("bluesky"),style:{background:"#3f51b5",color:"#fff"},children:["Send to Bluesky ",l?"with Preview":""]})})]}),S&&(0,n.jsxs)("section",{className:"card",style:{background:"#222e35",color:"#fff",maxWidth:600,margin:"0 auto 32px auto",boxShadow:"0 2px 12px #0002",border:"1.5px solid #229ED9"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:8},children:[(0,n.jsx)("img",{src:S.photo_url||"/images/telegram-profile.png",alt:"Telegram Profile",style:{width:48,height:48,borderRadius:"50%",background:"#229ED9",objectFit:"cover"}}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontWeight:700,fontSize:"1.1em",color:"#229ED9"},children:[S.first_name||"Telegram User",S.last_name?" "+S.last_name:""]}),(0,n.jsxs)("div",{style:{color:"#aaa",fontSize:"0.95em"},children:["@",S.username||"username"]})]})]}),(0,n.jsx)("textarea",{rows:"3",value:w,onChange:e=>I(e.target.value),style:{width:"100%",border:"none",background:"#2a3942",fontSize:"1.1em",color:"#fff",resize:"vertical",marginBottom:12,fontFamily:"inherit",outline:"none",fontWeight:400,minHeight:60,boxSizing:"border-box",padding:0,borderRadius:8}}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsxs)("label",{style:{color:"#aaa",fontSize:"0.97em"},children:["Group Chat ID (for group posting):",(0,n.jsx)("input",{type:"text",value:T,onChange:e=>C(e.target.value),placeholder:"e.g. -1001234567890",style:{marginLeft:8,padding:4,borderRadius:4,border:"1px solid #444",background:"#2a3942",color:"#fff",width:200}})]}),(0,n.jsxs)("div",{style:{color:"#888",fontSize:"0.93em",marginTop:4},children:["The bot must be an admin in the group. ",(0,n.jsx)("br",{}),"Group chat IDs usually start with ",(0,n.jsx)("b",{children:"-100"}),"."]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-start",marginTop:10},children:w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>P(S.id),style:{background:"#229ED9",color:"#fff"},children:"Send to Telegram DM"}),(0,n.jsx)("button",{onClick:()=>P(T),style:{background:"#229ED9",color:"#fff"},disabled:!T,children:"Send to Telegram Group"})]})})]}),!!c+!!h+!!S>=2&&(0,n.jsx)("div",{style:{textAlign:"center",marginBottom:24},children:(0,n.jsx)("button",{onClick:L,style:{background:"linear-gradient(90deg, #3f51b5 0%, #229ED9 100%)",color:"#fff",fontWeight:700,fontSize:"1.1em",padding:"0.9em 2.2em",borderRadius:999,boxShadow:"0 2px 8px #0002"},children:"Post All"})}),(0,n.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:(0,n.jsx)("a",{href:"/scheduler",children:(0,n.jsx)("button",{style:{minWidth:200},children:"Back to Content Generator"})})}),p&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,n.jsxs)("div",{style:{background:"#232526",padding:"2.5rem 2rem",borderRadius:"18px",boxShadow:"0 4px 24px rgba(0,0,0,0.25)",minWidth:320,textAlign:"center",color:"#f0f0f0"},children:[(0,n.jsx)("h2",{style:{marginBottom:24},children:"Are you sure you want to send?"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"24px",justifyContent:"center"},children:[(0,n.jsx)("button",{style:{background:"#0A66C2",minWidth:80},onClick:_,children:"Yes"}),(0,n.jsx)("button",{style:{background:"#333",minWidth:80},onClick:W,children:"No"})]})]})})]})}const r=i},5900:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/post",function(){return s(5165)}]);if(false){}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(5900));var s=e.O();_N_E=s}]);